<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<!--/*
  1. Variable Expressions           : ${...} (값을 나타낼 때 사용한다.)
  2. Selection Variable Expressions : *{...} (객체의 특정 필드 값을 나타낼 때 사용한다.)
  3. Message Expressions
  4. Link URL Expressions           : @{...} (경로 작성할 때 사용한다.)
  5. Fragment Expressions           : ~{...} (조각을 사용할 때 사용한다.)
*/-->

<!--/*
  ${name}             : request attribute      model.addAttribute("name", "킹콩")
                                               redirectAttributes.addFlashAttribute("name", "킹콩")
  ${param.name}       : request parameter      /board/detail.do?name=킹콩
  ${session.name}     : session attribute      session.setAttribute("name", "킹콩")
  ${application.name} : application attribute  servletContext.setAttribute("name", "킹콩")
*/-->

<!--/* /layout/header.html의 headFrag조각으로 head 태그를 바꾼다. */-->
<head th:replace="~{/layout/header::headFrag('Welcome')}"></head>

<body>



<form th:action="@{/regular/regularAdd.do}" enctype="multipart/form-data" method="post">
   <div>
    <div>상품명<input type="text" name="regularName"></div>
    <div>간단한 설명 <input type="text" name="regularSimpleDetail"></div>
    <div>판매가격<input type="text" name="regularSellPrice"></div><!--/*  정규식으로 숫자만 넣게 하기 필수 입력 값  */-->
    <div>매입가격<input type="text" name="regularOriginPrice"></div><!--/*  정규식으로 숫자만 넣게 하기 필수 입력 값  */-->
    <div>재고<input type="text" name="regularStock" placeholder="재고"></div> <!--/*  정규식으로 숫자만 넣게 하기 필수 입력 값  */-->
    <div>
      <label for="regularDisplay">디스플레이</label>
      <select id="regularDisplay" name="regularDisplay">
        <option value="1">보여</option>
        <option value="2">안보여</option>
      </select>
    </div>
    <div>
    <label for="regularCategory">카테고리</label>
      <select id="regularCategory" name="regularCategory">
        <option value="1">샐러드</option>
        <option value="2">건강식</option>
      </select>
    </div>
    <div>
      <label for="files">첨부</label>
      <input type="file" id="files" name="files" multiple="multiple" onchange="fnFileCheck(this)">
    </div>
    <div>
      <label for="regularState">상태</label>
      <select id="regularState" name="regularState">
        <option value="1">신상</option>
        <option value="2">베스트</option>
        <option value="3">일반</option>
      </select>
    </div>
   </div> 
   <button>작성완료</button>
   <input type="button" value="작성초기화" onclick="fnCancle()">
</form>

</body>
  <script th:inline="javascript">
  function fnFileCheck(vThis){
	    // 최대 크기 10MB
	    let maxSize = 1024 * 1024 * 10;
	    
	    // 첨부된 파일 목록
	    let files = vThis.files;
	    
	    // 첨부된 파일 순회(크기 체크 + 첨부된 파일명 표시)
	    $('#fileList').empty();
	    $.each(files, function(i, file){
	      
	      // 크기 체크
	      if(file.size > maxSize){
	        alert('각 첨부파일의 최대 크기는 10MB입니다.');
	        $(vThis).val('');  // 첨부된 파일을 모두 지운다.
	        $('#fileList').text('첨부 파일의 목록이 이 곳에 표시됩니다');
	        return;
	      }
	      
	    })
	    
	  } 
  </script>
</html>