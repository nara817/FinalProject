<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<!-- 아이콘 -->
<link rel="stylesheet"  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css">
<meta charset="UTF-8">
 <title>관리자: 회원관리</title>
  <style>
    table {
      border-collapse: collapse;
      border-top: 1px solid #444444;
      border-bottom: 1px solid #444444;
      width: 100%;
    }
    th, td {
      text-align: center;
      padding: 2px;
      border-bottom: 1px solid #444444;
    }
    th {
      background-color: #CBFF75;
    }
    tr:not(:first-child):not(:last-child) {
      border-top: none;
      border-bottom: none;
      background-color: transparent;
    }
    tr:nth-child(even) {
      background-color: #f2f2f2;
    }
    div {
      text-align: right;
      margin-bottom: 10px;
    }
    tr:first-child th,
    tr:first-child td {
      /* Apply background color to the first row only */
      background-color: #CBFF75;
    }
    .fa-user {
      margin-right: 10px;
    }
    
    .home {
    text-decoration: none; /* 링크의 밑줄 제거 */
    color: initial; /* 기본 링크 색상 유지 */
  }

  .home:hover {
    color: green; /* 마우스를 가져다 대면 초록색으로 변경 */
  }   
  </style>
  <script>
/*     function sortTable {
      var selectBox = document.ElementById("role");
      var selectedValue = selectBox.value.toLowerCase;

      var table = document.ElementById("memberTable");
      var rows = table.ElementsByTagName("tr");
      var data = [];

      for (var i = 1; i < rows.length - 1; i++) {
        var cells = rows[i].ElementsByTagName("td");
        var role = cells[1].innerText.toLowerCase;

        if (selectedValue === "all" || role === selectedValue) {
          data.push({
            row: rows[i].outerHTML,
            role: role
          });
        }
      }

      data.sort(function(a, b) {
        return a.role.localeCompare(b.role);
      });

      var tbody = document.createElement("tbody");

      for (var i = 0; i < data.length; i++) {
        tbody.innerHTML += data[i].row;
      }

      table.replaceChild(tbody, table.ElementsByTagName("tbody")[0]);
    }
 */
	// 정렬
	 $(function(){
		    // recordPerPage의 변경
		    $('#recordPerPage').on('change', function(){
		      location.href = '/employees/change/record?recordPerPage=' + $(this).val();
		    })
		  })
// 메인페이지로가기 이벤트
	  function showText() {
	    document.getElementById("hoverText").style.display = "inline";
	  }

	  function hideText() {
	    document.getElementById("hoverText").style.display = "none";
	  }
 
  </script>
</head>
<body>
	<h3>
	  <a class="home"  th:href="@{/admin/adminMain.do}" onmouseover="showText()" onmouseout="hideText()">
	    <i class="fa-solid fa-house"></i>
	    <span id="hoverText" style="display: none;">메인페이지로 가기</span>
	  </a>
	</h3>
	
  <h1><i class="fa-solid fa-user"></i>회원관리</h1>
  
  
  <div class="search-container">
    <input type="text" id="searchInput" placeholder="검색">
    <button onclick="searchTable">검색</button>
  </div>
  <div>
    <label for="role">정렬:</label>
    <select class="role_select" id="role" name="role">
      <option value="all">전체</option>
      <option value="user">사용자</option>
      <option value="admin">관리자</option>
      <option value="seller">판매자</option>
    <option value="all">전체</option>
    </select>
  </div>
	
  <table id="memberTable">
    <tr>
      <th>회원번호</th>
      <th>구분</th>
      <th>승인</th>
      <th>등급</th>
      <th>ID</th>
      <th>이름</th>
      <th>성별</th>
      <th>휴대폰</th>
      <th>이메일</th>
      <th>주소</th><!-- /* roadAddress */ -->
      <th>상세주소</th><!-- /* detailAddress */ -->
      <th>가입일</th>
    </tr>
    <!-- 여기에 회원 데이터를 동적으로 추가할 예정입니다 -->
    <tr th:each="user : ${user}">
      <td th:text="${user.userNo}"></td>
      <!-- <td th:text="${user.sellerCheck}"></td> -->
<td>
  <span th:text="${user.sellerCheck == 0 ? '사용자' : (user.sellerCheck == 1 ? '판매자' : (user.sellerCheck == 2 ? '관리자' : ''))}"></span>
</td>



      
      <!-- 판매자 가입시, 승인하지 않을 경우 판매불가상태, 관리자 승인시 판매가능 -->
	<td th:if="${session.loginId != null}">
		<select name="승인" th:if="${session.sellerChk == 1}">
			<option value="User">판매가능</option>
			<option value="Admin">판매불가</option>
		</select>
	</td>
      <td th:text="${user.grade}"></td>
      <td th:text="${user.id}"></td>
      <td th:text="${user.name}"></td>
      <td th:text="${user.gender}"></td>
      <td th:text="${user.mobile}"></td>
      <td th:text="${user.email}"></td>
      <td th:text="${user.roadAddress}"></td>
      <td th:text="${user.detailAddress}"></td>
      <!-- <td th:text="${user.joinedAt}"></td> -->
      <td th:text="${#dates.format(user.joinedAt, 'yyyy-MM-dd HH:mm:ss')}"></td>
      
    </tr>

		<tr>
			<td th:utext="${pagination}"></td>
		</tr>

	</table>
  <script>
			// DB에서 회원 데이터를 가져와서 동적으로 테이블에 추가하는 로직을 작성해야 합니다.
			// 여기에 해당 로직을 작성하면 됩니다.
		</script>
</body>
</html>