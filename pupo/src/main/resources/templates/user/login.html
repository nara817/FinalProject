<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<!--/*
  1. Variable Expressions           : ${...} (값을 나타낼 때 사용한다.)
  2. Selection Variable Expressions : *{...} (객체의 특정 필드 값을 나타낼 때 사용한다.)
  3. Message Expressions
  4. Link URL Expressions           : @{...} (경로 작성할 때 사용한다.)
  5. Fragment Expressions           : ~{...} (조각을 사용할 때 사용한다.)
*/-->

<!--/*
  ${name}             : request attribute      model.addAttribute("name", "킹콩")
                                               redirectAttributes.addFlashAttribute("name", "킹콩")
  ${param.name}       : request parameter      /board/detail.do?name=킹콩
  ${session.name}     : session attribute      session.setAttribute("name", "킹콩")
  ${application.name} : application attribute  servletContext.setAttribute("name", "킹콩")
*/-->

<!--/* /layout/header.html의 headFrag조각으로 head 태그를 바꾼다. */-->
<head th:replace="~{/layout/header::headFrag('Welcome')}"></head>


  <!--/* /layout/header.html의 gnbFrag조각으로 div 태그를 바꾼다. */-->
  <div th:replace="~{/layout/header::gnbFrag}"></div>
  <div class="wrapper fadeInDown">
    <div id="formContent">
    
      <div class="loginBox_input">
         <div class="loginBoxTitle" id="loginBox_input">Login Page</div>

         
         <form id="frmLogin" method="post" th:action="@{/user/login.do}">
         
          <input type="hidden" name="url" th:value="${url}">
          
          <input type="text" name="id" id="id" class="fadeIn second" placeholder="아이디">
          <input type="password" name="pw" id="pw" class="fadeIn third" placeholder="비밀번호">
     
            <div class="buttons">
              <button id="login-button" class="fadeIn fourth">로그인</button>
            </div>
            
            <label>
              <input type="checkbox" id="chkRememberId">
              아이디 기억
            </label>
            <label>
              <input type="checkbox" id="auto-login">
              자동 로그인
            </label>
          </form>

  <div id="formFooter">
    <a class="underlineHover" th:href="@{/user/findId.html}" >아이디 찾기</a> 
    <a class="underlineHover" th:href="@{/user/findPw.html}" >비밀번호 찾기</a>
    <a class="underlineHover" th:href="@{/user/agree.html}" >회원가입</a>
    <a class="underlineHover" th:href="@{/}">홈</a>
   </div>
   
      </div>
      
    </div>
  </div>

<script>

  // 로그인하기
  function fnLogin(){
    
    $('#frmLogin').on('submit', function(event){
      
      // 아이디, 비밀번호 공백 검사
      if($('#id').val() == '' || $('#pw').val() == ''){
        alert('아이디와 비밀번호를 모두 입력하세요.');
        event.preventDefault();
        return;
      }
      
      // 아이디 기억을 체크하면 rememberId 쿠키에 입력된 아이디를 저장
      if($('#chkRememberId').is(':checked')){
        $.cookie('rememberId', $('#id').val());
      } else {
        $.cookie('rememberId', '');
      }
      
    });
    
  }
  
  // 쿠키에 기억된 아이디 보여주기(아이디 기억)
  function fnDisplayRememberId(){
    
    // rememberId 쿠키에 저장된 아이디를 가져와서 표시
    
    let rememberId = $.cookie('rememberId');
    if(rememberId == ''){
      $('#id').val('');
      $('#chkRememberId').prop('checked', false);
    } else {
      $('#id').val(rememberId);
      $('#chkRememberId').prop('checked', true);
    }
    
  }
  
  $(function(){
    fnLogin();
    fnDisplayRememberId();
  });
  
</script>
</body>
</html>